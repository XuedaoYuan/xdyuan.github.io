<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>canvas基础 | 前端程序员-Cloud</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="前端博客,cloud,frontend,xdyuan,xdyuan314@gmail.com">
    
    <link rel="preload" href="./assets/css/0.styles.09baae4d.css" as="style"><link rel="preload" href="./assets/js/app.e7c186d1.js" as="script"><link rel="preload" href="./assets/js/2.0202d757.js" as="script"><link rel="preload" href="./assets/js/24.aae6fd93.js" as="script"><link rel="prefetch" href="./assets/js/10.e5ff73cd.js"><link rel="prefetch" href="./assets/js/100.1e8e1871.js"><link rel="prefetch" href="./assets/js/101.62254cdb.js"><link rel="prefetch" href="./assets/js/102.da0722e6.js"><link rel="prefetch" href="./assets/js/103.0d2e3218.js"><link rel="prefetch" href="./assets/js/104.233c0233.js"><link rel="prefetch" href="./assets/js/105.450b043e.js"><link rel="prefetch" href="./assets/js/106.4a9f6158.js"><link rel="prefetch" href="./assets/js/107.52b43349.js"><link rel="prefetch" href="./assets/js/108.227ce70b.js"><link rel="prefetch" href="./assets/js/109.ed79bcc4.js"><link rel="prefetch" href="./assets/js/11.6bfaef9c.js"><link rel="prefetch" href="./assets/js/110.4f222b59.js"><link rel="prefetch" href="./assets/js/111.61fb0eec.js"><link rel="prefetch" href="./assets/js/112.8ddc51cc.js"><link rel="prefetch" href="./assets/js/113.bf351d39.js"><link rel="prefetch" href="./assets/js/114.89b06bc0.js"><link rel="prefetch" href="./assets/js/115.f43e92b0.js"><link rel="prefetch" href="./assets/js/116.dc54d772.js"><link rel="prefetch" href="./assets/js/117.d7e3f1c3.js"><link rel="prefetch" href="./assets/js/118.c5f73f8a.js"><link rel="prefetch" href="./assets/js/119.dafc9bc4.js"><link rel="prefetch" href="./assets/js/12.8d27eee0.js"><link rel="prefetch" href="./assets/js/13.9e08533c.js"><link rel="prefetch" href="./assets/js/14.def7f8c9.js"><link rel="prefetch" href="./assets/js/15.292d73e0.js"><link rel="prefetch" href="./assets/js/16.9927a2af.js"><link rel="prefetch" href="./assets/js/17.2bb4e025.js"><link rel="prefetch" href="./assets/js/18.28dd398e.js"><link rel="prefetch" href="./assets/js/19.a50938b6.js"><link rel="prefetch" href="./assets/js/20.c2a92048.js"><link rel="prefetch" href="./assets/js/21.b5476db8.js"><link rel="prefetch" href="./assets/js/22.6847e3fc.js"><link rel="prefetch" href="./assets/js/23.072c8789.js"><link rel="prefetch" href="./assets/js/25.55a7ba88.js"><link rel="prefetch" href="./assets/js/26.0b37ece6.js"><link rel="prefetch" href="./assets/js/27.87edd656.js"><link rel="prefetch" href="./assets/js/28.249f310e.js"><link rel="prefetch" href="./assets/js/29.bfdcb671.js"><link rel="prefetch" href="./assets/js/3.1ee533a3.js"><link rel="prefetch" href="./assets/js/30.ee930afa.js"><link rel="prefetch" href="./assets/js/31.204fd735.js"><link rel="prefetch" href="./assets/js/32.b2f57762.js"><link rel="prefetch" href="./assets/js/33.1831e793.js"><link rel="prefetch" href="./assets/js/34.97dc2e79.js"><link rel="prefetch" href="./assets/js/35.701d3a8f.js"><link rel="prefetch" href="./assets/js/36.ce42227b.js"><link rel="prefetch" href="./assets/js/37.c0b75b7a.js"><link rel="prefetch" href="./assets/js/38.936c9bcb.js"><link rel="prefetch" href="./assets/js/39.9418cd37.js"><link rel="prefetch" href="./assets/js/4.61bc51a9.js"><link rel="prefetch" href="./assets/js/40.b659071b.js"><link rel="prefetch" href="./assets/js/41.4b9b4607.js"><link rel="prefetch" href="./assets/js/42.d677ac9e.js"><link rel="prefetch" href="./assets/js/43.46cc5a17.js"><link rel="prefetch" href="./assets/js/44.a530e575.js"><link rel="prefetch" href="./assets/js/45.cc546b6b.js"><link rel="prefetch" href="./assets/js/46.da913f45.js"><link rel="prefetch" href="./assets/js/47.5d1604ce.js"><link rel="prefetch" href="./assets/js/48.98384c4a.js"><link rel="prefetch" href="./assets/js/49.3c85d030.js"><link rel="prefetch" href="./assets/js/5.b6cbdf95.js"><link rel="prefetch" href="./assets/js/50.e03270b9.js"><link rel="prefetch" href="./assets/js/51.6611a087.js"><link rel="prefetch" href="./assets/js/52.61302de3.js"><link rel="prefetch" href="./assets/js/53.ab077289.js"><link rel="prefetch" href="./assets/js/54.6dba899f.js"><link rel="prefetch" href="./assets/js/55.6cece0c7.js"><link rel="prefetch" href="./assets/js/56.a0d98774.js"><link rel="prefetch" href="./assets/js/57.a8c89d50.js"><link rel="prefetch" href="./assets/js/58.90311cf2.js"><link rel="prefetch" href="./assets/js/59.bd4824af.js"><link rel="prefetch" href="./assets/js/6.aa0b31ac.js"><link rel="prefetch" href="./assets/js/60.1a4a80d1.js"><link rel="prefetch" href="./assets/js/61.85eae681.js"><link rel="prefetch" href="./assets/js/62.99ee7a31.js"><link rel="prefetch" href="./assets/js/63.1cde4039.js"><link rel="prefetch" href="./assets/js/64.372d643e.js"><link rel="prefetch" href="./assets/js/65.fd9b814f.js"><link rel="prefetch" href="./assets/js/66.6900e388.js"><link rel="prefetch" href="./assets/js/67.698ed578.js"><link rel="prefetch" href="./assets/js/68.a760b390.js"><link rel="prefetch" href="./assets/js/69.556e88cc.js"><link rel="prefetch" href="./assets/js/7.b99a569f.js"><link rel="prefetch" href="./assets/js/70.b5fc18f7.js"><link rel="prefetch" href="./assets/js/71.443ea46f.js"><link rel="prefetch" href="./assets/js/72.487dc914.js"><link rel="prefetch" href="./assets/js/73.9d5b896a.js"><link rel="prefetch" href="./assets/js/74.4d75ed8c.js"><link rel="prefetch" href="./assets/js/75.6be361ca.js"><link rel="prefetch" href="./assets/js/76.c2efa596.js"><link rel="prefetch" href="./assets/js/77.30b85f49.js"><link rel="prefetch" href="./assets/js/78.a76c4b5a.js"><link rel="prefetch" href="./assets/js/79.ea8f7994.js"><link rel="prefetch" href="./assets/js/8.527fb7c1.js"><link rel="prefetch" href="./assets/js/80.cc689d4a.js"><link rel="prefetch" href="./assets/js/81.16208bf4.js"><link rel="prefetch" href="./assets/js/82.b87d7949.js"><link rel="prefetch" href="./assets/js/83.13371087.js"><link rel="prefetch" href="./assets/js/84.089be50f.js"><link rel="prefetch" href="./assets/js/85.38d225f0.js"><link rel="prefetch" href="./assets/js/86.1e7eb323.js"><link rel="prefetch" href="./assets/js/87.af1f11be.js"><link rel="prefetch" href="./assets/js/88.7dd1b625.js"><link rel="prefetch" href="./assets/js/89.8458d2c7.js"><link rel="prefetch" href="./assets/js/9.8b75f5e9.js"><link rel="prefetch" href="./assets/js/90.a2584d15.js"><link rel="prefetch" href="./assets/js/91.ff533d16.js"><link rel="prefetch" href="./assets/js/92.e593416b.js"><link rel="prefetch" href="./assets/js/93.a8f4c390.js"><link rel="prefetch" href="./assets/js/94.48a66df5.js"><link rel="prefetch" href="./assets/js/95.5fc0aca2.js"><link rel="prefetch" href="./assets/js/96.26935bd1.js"><link rel="prefetch" href="./assets/js/97.c110472c.js"><link rel="prefetch" href="./assets/js/98.49eee4fd.js"><link rel="prefetch" href="./assets/js/99.3e92339b.js">
    <link rel="stylesheet" href="./assets/css/0.styles.09baae4d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/./" class="home-link router-link-active"><!----> <span class="site-name">前端程序员-Cloud</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/XuedaoYuan" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/XuedaoYuan" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>前端基础知识</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/./dom/" class="sidebar-link">DOM、BOM</a></li><li><a href="/./blob/" class="sidebar-link">前端二进制文件处理</a></li><li><a href="/./error/" class="sidebar-link">Error错误处理</a></li><li><a href="/./prototype/" class="sidebar-link">继承-Javascript</a></li><li><a href="/./imgsize/" class="sidebar-link">图片处理</a></li><li><a href="/./viewsize/" class="sidebar-link">各种视口宽高</a></li><li><a href="/./canvas/" aria-current="page" class="active sidebar-link">Canvas基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/./canvas/#_1、-canvas-标签" class="sidebar-link">1、&lt;canvas&gt;标签</a></li><li class="sidebar-sub-header"><a href="/./canvas/#_2、render-context-渲染上下文" class="sidebar-link">2、render context 渲染上下文</a></li><li class="sidebar-sub-header"><a href="/./canvas/#_3、绘制形状" class="sidebar-link">3、绘制形状</a></li><li class="sidebar-sub-header"><a href="/./canvas/#_4、绘制路径" class="sidebar-link">4、绘制路径</a></li><li class="sidebar-sub-header"><a href="/./canvas/#_5、设置样式和颜色" class="sidebar-link">5、设置样式和颜色</a></li><li class="sidebar-sub-header"><a href="/./canvas/#_6、绘制文本" class="sidebar-link">6、绘制文本</a></li><li class="sidebar-sub-header"><a href="/./canvas/#_7、绘制图片" class="sidebar-link">7、绘制图片</a></li><li class="sidebar-sub-header"><a href="/./canvas/#_8、状态的保存和恢复" class="sidebar-link">8、状态的保存和恢复</a></li><li class="sidebar-sub-header"><a href="/./canvas/#_9、变形" class="sidebar-link">9、变形</a></li><li class="sidebar-sub-header"><a href="/./canvas/#_10、合成" class="sidebar-link">10、合成</a></li><li class="sidebar-sub-header"><a href="/./canvas/#_11、剪裁路径" class="sidebar-link">11、剪裁路径</a></li><li class="sidebar-sub-header"><a href="/./canvas/#_12、动画" class="sidebar-link">12、动画</a></li></ul></li><li><a href="/./svg/" class="sidebar-link">SVG</a></li><li><a href="/./function/" class="sidebar-link">纯函数、柯里化、偏应用、compose</a></li><li><a href="/./functionClosures/" class="sidebar-link">闭包</a></li><li><a href="/./deepclone/" class="sidebar-link">深拷贝</a></li><li><a href="/./call/" class="sidebar-link">call apply bind模拟实现</a></li><li><a href="/./new/" class="sidebar-link">new命令</a></li><li><a href="/./packagejson/" class="sidebar-link">package.json 文件</a></li><li><a href="/./console/" class="sidebar-link">Console用法</a></li><li><a href="/./number/" class="sidebar-link">数值表示</a></li><li><a href="/./floatcalc/" class="sidebar-link">数值计算</a></li><li><a href="/./parseint/" class="sidebar-link">number、parseInt区别</a></li><li><a href="/./bigint/" class="sidebar-link">BigInt</a></li><li><a href="/./typeconversion/" class="sidebar-link">类型转换</a></li><li><a href="/./typeconversionimplicit/" class="sidebar-link">类型转换-隐式转换</a></li><li><a href="/./date/" class="sidebar-link">Date日期处理</a></li><li><a href="/./dateformat/" class="sidebar-link">Date格式化和解析</a></li><li><a href="/./string/" class="sidebar-link">String字符和编码</a></li><li><a href="/./replace/" class="sidebar-link">String.prototype.replace</a></li><li><a href="/./regexp/" class="sidebar-link">RegExp正则表达式</a></li><li><a href="/./promise/" class="sidebar-link">Promise</a></li><li><a href="/./mouseevent/" class="sidebar-link">Mouse 事件</a></li><li><a href="/./esmodule/" class="sidebar-link">ES Module</a></li><li><a href="/./browserrender/" class="sidebar-link">浏览器渲染原理</a></li><li><a href="/./setmap/" class="sidebar-link">Set, Map, for of</a></li><li><a href="/./throttle/" class="sidebar-link">debounce-throttle节流防抖</a></li><li><a href="/./blockscope/" class="sidebar-link">块级  作用域</a></li><li><a href="/./precompile/" class="sidebar-link">预编译</a></li><li><a href="/./json/" class="sidebar-link">JSON序列化和反序列化</a></li><li><a href="/./event/" class="sidebar-link">Event 事件类</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端常用功能</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/./usualjs/" class="sidebar-link">常用JS功能</a></li><li><a href="/./easy2forgetcss/" class="sidebar-link">常用CSS记录</a></li><li><a href="/./usualutils/" class="sidebar-link">常用工具函数</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>综合知识</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>基础算法题解</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/./tools/" class="sidebar-link">常用三方库</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue3</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SolidJs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>网络基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript系列</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>工具学习</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>VuePress 基本语法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>预备学习</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="canvas基础"><a href="#canvas基础" class="header-anchor">#</a> canvas基础</h1> <p><code>&lt;canvas&gt;</code> 是 <code>HTML5</code> 新增的，一个可以使用脚本(通常为 <code>JavaScript</code>) 在其中绘制图像的 <code>HTML</code> 元素。它可以用来制作照片集或者制作简单(也不是那么简单)的动画，甚至可以进行实时视频处理和渲染。</p> <h2 id="_1、-canvas-标签"><a href="#_1、-canvas-标签" class="header-anchor">#</a> 1、<code>&lt;canvas&gt;</code>标签</h2> <p><code>&lt;canvas&gt;</code> 看起来和 <code>&lt;img&gt;</code> 标签一样，只是 <code>&lt;canvas&gt;</code> 只有两个可选的属性 <code>width、heigth</code> 属性，而没有 <code>src、alt</code> 属性。</p> <p>如果不给 <code>&lt;canvas&gt;</code> 设置 <code>widht、height</code> 属性时，则默认 <code>width</code>为300、<code>height</code> 为 150，单位都是 <code>px</code>。</p> <p>也可以使用 <code>css</code> 属性来设置宽高，但是如宽高属性和初始比例不一致，他会出现扭曲。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>如果使用js重新设定了width和height属性， 那么之前绘制的内容会被清空。</p></div> <p><strong>canvas的width、height属性表示的是画布的实际尺寸，绘制图形的参数都是基于这个尺寸。而css设置的width、height，表示的是这个canvas元素在页面中渲染的尺寸大小。</strong></p> <p>比如下面这个例子，这个canvas的实际尺寸是<code>300*300</code>， 但是显示在页面上只有<code>150*150</code>, 说明被缩小了一倍</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;canvas width=&quot;300&quot; height=&quot;300&quot; style=&quot;width: 150px; height: 150px;&quot;&gt;&lt;/canvas&gt;
</code></pre></div><p><strong>用canvas绘制可能会存在高倍屏下的模糊问题</strong> 解决方案是在高倍屏下， 让canvas的实际尺寸变大， 可以像下面那样子设置，通过<code>window.devicePixelRatio</code> 获取倍率</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> ratio <span class="token operator">=</span> window<span class="token punctuation">.</span>devicePixelRatio <span class="token operator">||</span> <span class="token number">1</span>
canvas<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">,</span> cssWidth <span class="token operator">*</span> ratio<span class="token punctuation">)</span><span class="token punctuation">;</span>
canvas<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">,</span> cssHeight <span class="token operator">*</span> ratio<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_2、render-context-渲染上下文"><a href="#_2、render-context-渲染上下文" class="header-anchor">#</a> 2、render context 渲染上下文</h2> <p><code>&lt;canvas&gt;</code> 会创建一个固定大小的画布，提供一个或多个<strong>渲染上下文</strong>(画笔)，使用<strong>渲染上下文</strong>来绘制和处理要展示的内容。</p> <p>目前研究 2D 渲染上下文。 其他的上下文比如， WebGL 使用了基于 OpenGL ES的3D 上下文 (&quot;experimental-webgl&quot;) 。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> context <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_3、绘制形状"><a href="#_3、绘制形状" class="header-anchor">#</a> 3、绘制形状</h2> <h5 id="_3-1-栅格和坐标"><a href="#_3-1-栅格和坐标" class="header-anchor">#</a> 3.1 栅格和坐标</h5> <p>canvas的内容可以看做是做栅格坐标系统， 左上角是(0,0) 。所有元素的位置都是相对原点来定位。后面可能还需要涉及到原点的平移，网格的旋转缩放等。类似于下图</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANwAAADcCAMAAAAshD+zAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAABgUExURQAAACYmJn5+fry8vOrq6kNDQ9zc3I6Ojm5ubp2dna2trVtbW87OzsjIyO/v7////zJfofb29v7+/uXl5ff39/39/fj4+Pz8/Pn5+fr6+szMzPv7+6enp+fn59DQ0PT09O486JcAAAQQSURBVHja7N2JjtowEAZgXzPkIi5H2wANvP9b1uFYtZtAE661p/8v8GqjCPxp7JhYK1Z5wVHAAQcccMABB5wAXON4v004e3bNNdyB2R0WCefgmA/DuIbbRfJpuRnEOV4ICLtBHDsJOMeDuP1BAu6wH8RtFyKyBS5ceoiolYqj+WJOQnFtB0uudCNx1oTGWKG4LDSZUNxCn58icXlpy1zsOmeTm3EjcOkscG0YWXY+CZfQAkfz9u86XMGtL2kpNNSuUwiTyf868C+cNaExNjQqWpS6dM3QehouC01mu1eIOsfOlnoabq3Pz/XQ5tjq9jE18rz7j/36s3KWZmYa7rjAxY27hHit20m4MOvs+j5cGC3vxBXmPIsm4D6mbey4fl6Je/ewBA444IADDjjggAMOOOCAux+36qe6fUyNPO/+Y6gccCPfmCvvaxsx7kc/43Gq9qZ8E+7HrbwA50vjNUvFsZqRl4rzpbJycTl5uThdyMVZ7eXiTCEY985PKMABBxxwwAH3JFyUeyio3L24uqi9raTOubKsdGK4pp8ruFqr/AuHZXMrD+P8TNdicYUqtVRcpaow7YY7844/j3pt5erjQyjui9e5J+KUGv3G3akJ4abn2/2Jv3Jp4SYOI+CAAw444IThpu95PIAbu4fyP1RuLheXG21CeCRu00+cuGPXLrjPXRaBuxbg4seZ7g7LCsVpJ7hyJHVYZkSkdWi2AnFbe47D1RK4qHCn3bbPs04ILrObLW0siV0KjN3IxGneOGKnReIKTcrkqpB5tXSWN+ywFAziotxDOY5JszFTblZ3/cRZua5nhdmdcJ+7LAF3NcDFj2NSnEnFkaUdSZ1zgbYzVm7lWDuhuC0pXeBqCVxcuIK63S+hOF10u19ilwKhwzIPn5l1KfSDc27OwV2BdNzPfuLE/bwV4E64KPdQUDnggAMOOOCAA24i7vXHgAMOOOCAexnuez9x4r7fCnD/Ae5V32ny0PehoHLAAQcccMABBxxwwAEHHHDAicAt+4kTt7wV4E64KPdQUDnggAMOOOCA+zfuV4x5Fm6ZXIADbmKsPf00MeCUepLugjKvHxBvx1Wq+sDlHAnu2b3ocGRF4Gx2nF35LIjCrzMqMxOKqMPLGjJfj3ssimtVLPWpVDnVrC+Vs7XmxHGmnGnK6TQCOtQfw5Js4rha6Up3hes0Zb5cZvHgwlxZcvFQ6ah7nHBWF7mKCNd1pXqodMWyzi+rNpu8W8S7peC8IrwT17vJoNpmPrWMxdny03+okYTzZe7l4owFDrjocCkGOOCAiwG330mw7faDOK4l4GoexLmVBNzKDeIadunbHDeDOH/gVZ30vNvVKz74YZxvHO+3CWfPrvHXcNICHHDAAQcccMAlmt8CDABIbErQtEaWvQAAAABJRU5ErkJggg==" alt="Canvas_default_grid"></p> <h5 id="_3-2-绘制矩形"><a href="#_3-2-绘制矩形" class="header-anchor">#</a> 3.2 绘制矩形</h5> <p>canvas只支持一种原生的图形绘制：<strong>矩形</strong>。所有其他的图形都需要生成一种路径（path）。不过我们拥有众多路径生成的方法让复杂图形的绘制成为了可能。</p> <p>canvas提供三种方法绘制矩形</p> <ol><li><code>context.fillRect(x, y, width, height);</code> 绘制一个填充的矩形。</li> <li><code>context.strokeRect(x, y, width, height)</code> 绘制一个矩形的边框。</li> <li><code>clearRect(x, y, widh, height)</code> 清除指定的矩形区域，这块区域会变得透明。</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> c <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> ctx <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'#FF0000'</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>绘制一个颜色填充为红色的矩形</p> <h2 id="_4、绘制路径"><a href="#_4、绘制路径" class="header-anchor">#</a> 4、绘制路径</h2> <p>图形的基本元素是路径。</p> <p>路径是通过不同颜色和宽度的线段或曲线相连形成的不同形状的点的集合。</p> <p>一个路径，甚至一个子路径，都是闭合的。</p> <p>使用路径绘制图形需要一些额外的步骤：</p> <ol><li>创建路径起始点</li> <li>调用绘制方法去绘制出路径</li> <li>把路径封闭</li> <li>一旦路径生成，通过描边或填充路径区域来渲染图形。</li></ol> <p>下面是需要用到的方法：</p> <ol><li><p><code>beginPath()</code></p> <p>新建一条路径，路径一旦创建成功，图形绘制命令被指向到路径上生成路径</p></li> <li><p><code>moveTo(x, y)</code></p> <p>把画笔移动到指定的坐标<code>(x, y)</code>。相当于设置路径的起始点坐标。</p></li> <li><p><code>closePath()</code></p> <p>闭合路径之后，图形绘制命令又重新指向到上下文中</p></li> <li><p><code>lineTo()</code></p> <p>绘制一条从当前位置到指定坐标的直线</p></li> <li><p><code>stroke()</code></p> <p>通过线条来绘制图形轮廓</p></li> <li><p><code>fill()</code></p> <p>通过填充路径的内容区域生成实心的图形</p></li></ol> <h5 id="_4-1-绘制线段"><a href="#_4-1-绘制线段" class="header-anchor">#</a> 4.1 绘制线段</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> context <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 新建一条path</span>
context<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 移动画笔到坐标（50， 50）</span>
context<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 绘制一条从当前位置到指定坐标的(200, 50)的直线</span>
context<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// //闭合路径。会拉一条从当前点到path起始点的直线。如果当前点与起始点重合，则什么都不做</span>
context<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 绘制路径</span>
</code></pre></div><h5 id="_4-2-绘制三角形"><a href="#_4-2-绘制三角形" class="header-anchor">#</a> 4.2 绘制三角形</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> context <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 新建一条path</span>
context<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 移动画笔到坐标（50， 50）</span>
context<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 绘制一条从当前位置到指定坐标的(200, 50)的直线</span>
context<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 虽然只画了两条线， 但是closePath会闭合路径</span>
context<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 描边；stroke 不会自动闭合路径</span>
</code></pre></div><h5 id="_4-3-填充三角形"><a href="#_4-3-填充三角形" class="header-anchor">#</a> 4.3 填充三角形</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> context <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 新建一条path</span>
context<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 移动画笔到坐标（50， 50）</span>
context<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 绘制一条从当前位置到指定坐标的(200, 50)的直线</span>
context<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//填充闭合区域。如果path没有闭合，则fill()会自动闭合路径。</span>
</code></pre></div><h5 id="_4-4-绘制圆弧"><a href="#_4-4-绘制圆弧" class="header-anchor">#</a> 4.4 绘制圆弧</h5> <p>有两个方法可以绘制圆弧：</p> <p>1、<strong>arc(x, y, r, startAngle, endAngle, anticlockwise)</strong>: 以<code>(x, y)</code> 为圆心，以<code>r</code> 为半径，从 <code>startAngle</code> 弧度开始到<code>endAngle</code>弧度结束。<code>anticlosewise</code> 是布尔值，<code>true</code> 表示逆时针，<code>false</code> 表示顺时针(默认是顺时针)。</p> <p>注意：</p> <ol><li><p>这里的度数都是弧度。</p></li> <li><p><code>0</code> 弧度是指的 <code>x</code> 轴正方向。</p> <div class="language- extra-class"><pre class="language-text"><code>radians=(Math.PI/180)*degrees   //角度转换成弧度
</code></pre></div></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">&quot;2d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>可以绘制</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASEAAAERCAYAAAA0ZxG2AAABQ2lDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSCwoyGFhYGDIzSspCnJ3UoiIjFJgf8rAxSDFwMdgwKCYmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsgspo8T/EKj9hdbvGqeobqCfxqmehTAlZJanAyk/wBxcnJBUQkDA2MCkK1cXlIAYrcA2SJFQEcB2TNA7HQIew2InQRhHwCrCQlyBrKvANkCyRmJKUD2EyBbJwlJPB2JDbUXBDidUvMCFXycXQi4lWRQklpRAqKd8wsqizLTM0oUHIEhlKrgmZesp6NgZGBkyMAACm+I6s9B4HBkFNuHEMtfwsBg8Y2BgXkiQixpCgPD9jYGBolbCDGVeQwM/MCw2naoILEoEe4Axm8sxWnGRhA2jz0DA+vd//8/azAwsE9kYPg78f//34v///+7GGj+bQaGA5UAwrlfu+SYe5gAAAA4ZVhJZk1NACoAAAAIAAGHaQAEAAAAAQAAABoAAAAAAAKgAgAEAAAAAQAAASGgAwAEAAAAAQAAAREAAAAAsKd/+AAAHa1JREFUeAHtnfmTVNXZx59hANnXYV9lEQY0BFCDgCxKUgJjyhArINGUWaqSmLXyD+T96a3kt1RKq1KVqlCVpIgmWmgJqIkKKmAkUAIuyCCoEVmHdWbYBpi3v+dNW2SY6bndfbv73Hs+p6qrZ7rvPfecz3P7e5/znK2qNZOMBAEIQKBCBLpU6LpcFgIQgIAjgAhxI0AAAhUlgAhVFD8XhwAEECHuAQhAoKIEEKGK4ufiEIAAIsQ9AAEIVJRA14penYunhoBGely+fNnVp6qqyvSqrq527/qbBIGOCCBCHZHh87wINDQ02JNPPmndunWzAQMGWK9evWzgwIFWU1NjQ4YMsZtuusm6du36+Qthygtvqg9GhFJt3vJUrqWlxXbu3Glr1651AnTzzTe7C58/f94uXLhg8pIkROPGjbNJkybZLbfcYqNGjbKePXta9+7drUsXogLlsZSfV6lixLSfhklSqa5du2Yff/yxrVmzxl544QVbtmyZLVq0yHlFzc3NdvbsWTt58qQdO3bMjh49amfOnLHBgwfb9OnTbdasWTZ16lTr3bu3E6Qk1ZuyxkMATygejkHnIk9mwoQJ9r3vfc81t+QVzZgxw+rq6lwzTHDOnTvnhEjNNonRJ598YgcOHLAtW7a4JtucOXNs3rx5Nnz4cOvRo0fQPEOrPJ5QaBYvcX0lLn/4wx9s+/bt9uijj9ry5cutT58+N1xV3tHhw4edGL377ru2b98+k9d011132ZIlS0xNOsToBmyp/KD6fzIplTWjUhUhoKC0vKITJ07Yhg0bXDNr/PjxNzS1JDCKEylGpOaYjlGM6J133rGNGze6JpviRjpOvWyk9BJAhNJr24rVTEIkT6YzIcoWUOIzevRoq62tdecpWP3222/b66+/blevXv28iUaPWpZYut4RoXTZ05va5CtEKri69xUTmjZtmo0ZMzYTQ2qw1157zTXZ5DX1798fr8gbC8dXEEQoPpbk1IZAWyHS2KH2mmZtTnNiNGrUSNdMk/js2rXLNm3a5ARo5MiRnwe7257H/8kkgAgl026JKXVbIVJXfBQhUgV1rOJLig0dOXLEXn75Zbt48aIbbyRBI6WDACKUDjt6XYtihEhxIDXRNMBRf7/xxhturJHEqb1eN69BULh2CSBC7WLhw7gJFCNEKkvfvn1t8uTJbirI1q1b7eDBg65nTZ+Tkk0AEUq2/RJV+mKFSL1masppTtqbb75p9fX1zkNCiBJ1G9xQWEToBiR8UEoCxQqRRmerO19CtG3bNjfqWh4SQlRKq5U2b0SotHzJvR0CbYUoaq9ZNqusECkfxYg+++wz11RTIJuUPAKIUPJslooSFytEClKr10zB6b///e/W1NTkYkRM9Uje7YEIJc9mqSlxsUIkj0jjhtRtrykiapKp10zrFpGSQwARSo6tUlnS64Vo/fr1bjE0BZ8VhI6SJDjDhg1z44jUNJsyZYr7nykeUej5cQwi5Icdgi5FVoi0zEeuSa8dQVIsSCOr33vvPTt06JCbg0Z8qCNa/n2OCPlnkyBLdL0Q5esRyevRImmKD7300kvOi9LsfJplybiVEKFk2CmIUmaFKDv7XjEeLQkbpWkmIdL5WrlRgxlnzJiZEaZBQXBLeiURoaRbMGXll5AouKym2fPPP2/9+vWzsWPHRhIiLaavmfY7duzILJDW5CbA6jOS3wQQIb/tE2TpJCQSIi0Dq6ZZVCGSN6RjtcC+zrvtttvcvDOC1H7fRoiQ3/YJtnRthShq00xxIC2StmfPHmtsbHRrEzF2yO/bCBHy2z5Bly4bIzp+/LjbxUOB5ygxIvWMaeyQgtSzZ8+2oUOHBs3R98ojQr5bKPDyZYVITbPsgMTOhEjekF6KDeldc8uiBLcDR12x6iNCFUPPhaMSyAqRPKKoQiTROX36tNv144477nAB66jX47jyEmDry/Ly5moFEtAo6u985zsmQdGWQtpkUfPFOkqKIc2aNdtOnTrllvzQgvkkPwngCflpF0rVDoF8PCL1iLW2XrMPPvjABahvvfVW9jFrh6kPHzHTzwcrUIbIBOQRffe733XHyyNSWrp0abtLvUq0tBPsq6++6rai1v8k/wjQHPPPJpSoEwIKTEuIOmuaqTdt6tRaFxvSnLJr1651kjNfV4IAnlAlqHPNoglkhUgZ5fKIamoGuy76Dz/80HlFEiaSXwQQIb/sQWnyIBBFiCQ62g32o48+sgsXLrTbbMvjkhxaAgKIUAmgkmX5CHQmRFkR0uqLGsBI8o8AIuSfTShRngRyCZGmbGhhfI0xkidE8o8AIuSfTShRAQQkRBpHpNQ2RqRJrVoKVjPztc6Q/ib5QwAR8scWlKRIAtkBjcomK0Rf/epX3YRWTYjVOkUtLS3sZV8k57hPR4TiJkp+FSWQFSINVpQQVVdXu3WnJUJnz55FhCpqnfYvjgi1z4VPE0xAQvTtb387M2K61dasWWP33nuvE6Pm5mZj+oZ/hqVx7J9NKFEMBLIekZby+Nvf/uZ2aj137hwDFmNgG3cWeEJxE83kpyfwpUuX3A2v3hkCoSWAHCHLrEd05coVt9KiesjwhCKAK/MhVZkfTGuZr5n6y2l5Ua2PrFnedXV1bh+s1Ffa4woePHjQNm3aZDNnznRLvnbr1s3j0oZXNDyhEthcT95PPvnEiZA8IlJlCcgjWrlyJaOlK2uGDq9OTKhDNIV/IedSXcFqivHULZxjXGeqOcycsbhoxp8PIhQ/UxcLUk+MFlzX8qIkCECgYwKIUMdsCv5GzTGNSdHTl32vCsbIiYEQQIRKYGiJkJYV1SJaiFAJAJNlqgggQiUwpyZKqmdM+6MjQiUATJapIoAIxWxOrd53+PBh69Wrl9sNNObsyQ4CqSOACMVsUnXJaxW/YcOGmXZ8IEEAArkJIEK5+eT9bVaERowYwV5XedPjhBAJIEIxW12jpQ8cOGAaIDdw4MCYcyc7CKSPACIUo00VD9IUAc1P0iJbBKVjhEtWqSWACMVoWnlBO3fudMuJDh8+PMacyQoC6SWACMVo28bGRtu9e3dmr6upVlNTE2POZAWB9BJAhGKyrZpg7733nskbmj59Ot3zMXElm/QTQIRisrG8oC1btriF1BUPIkEAAtEIIELROOU8SrPm1SO2Z88etzWxxgiRIACBaAQQoWicch4lL+jVV1+1kSNH2rRp01i+IyctvoTAfxNAhP6bR97/yQuqr6+3rVu32vz5823s2LF558EJEAiZACJUpPXPnDlj2mJ4zJgxpkXVGRtUJFBOD44AIlSEydUjtn37dtu1a5ctW7bMjZIuIjtOhUCQBBChIsyu3Rs2bNjgxgV98YtfJBZUBEtODZcAIlSg7bWH1bPPPuvGBS1fvpwdNQrkyGkQQIQKuAcuX75smzdvtldeecWWLFliM2bMYG+xAjhyCgREABEq4D7Yu3ev29Xz1ltvtYULF7pdNQrIhlMgAIEMAUQoz9vgyJEj9uSTT7plOh588EFjomqeADkcAm0IIEJtgOT6V4HoP/7xj6Zu+YceesgNTKyqqsp1Ct9BAAKdEECEOgGU/frEiRP25z//2fbv3+9287z99tuJA2Xh8A6BIgiwM18EePKAJEDvv/++rVq1yubOnUt3fARuHAKBKAQQoRyUNCXj6NGjrgkmD0gCtGDBAuvevXuOs/gKAhDIh0BV5ofWms8JoRyrBevVC/bUU0+5GNDKlStt3rx5eECh3ADUs2wEEKF2UGsL59dee82efvppt4vq6tWr3bywbt26tXM0H0EAAsUQoDl2Hb2WlhZraGiwdevWuaU5NA5I3fBanqNLF2L416HiTwjERgBPKINSu2TI+3nrrbds48aNbiqGRkJrIKLGAdENH9v9RkYQuIFA0CKkcJjmgNXX788sx/FSZmVELVJfa3V1dSYvqGfPnjcA4wMIQCBeAkGKkJpdTU1NbklWrYi4bds2txiZluPQPDC8n3hvMnKDQC4CwYiQmlzNzc1OfN599123KL3WhB49erTr9Zo9+w6bMGG8VVdX5+LFdxCAQMwEUitCEp2LFy+autolPh999JHbmFD7gunzSZMmuUXpa2unZ7yg0ayIGPONRXYQiEogsSKkeM6FCxdMTSv9LdHRSodXrlzJeDvnM4MMD9uHH37oXtmtmbUEa21trdsXTH+PGDECzyfqncJxECgRgcSKkLyZ5557znk4Eh/FeNTDderUKfd379693UJj2gFj/Pjxbm94bcUzZMgQ69u3b4lwki0EIJAvgcSOE5L3o2aWvKEePXo4wZk4caJbYmPw4MFuB1SJTb9+/dyAQxagz/fW4HgIlIdAYj0hNb80sFAxn65du7qXhEaCxNyu8tw8XAUCcRBIrAjFUXnygAAEKk+AuQiVtwElgEDQBBChoM1P5SFQeQKIUOVtQAkgEDQBRCho81N5CFSeACJUeRtQAggETQARCtr8VB4ClSeACFXeBpQAAkETQISCNj+Vh0DlCSBClbcBJYBA0AQQoaDNT+UhUHkCiFDlbUAJIBA0AUQoaPNTeQhUngAiVHkbUAIIBE0AEQra/FQeApUngAhV3gaUAAJBE0CEgjY/lYdA5QkkdnlXrax4/Phxt3OGdkjVVj3aKz77rlUW9WL31MrfZJQAArkIJHZlxdOnT9vPfvYz27Fjh1vOdcCAAVZTU2NaX1qL248bN84mT57s9hXTovd6saNqrluB7yBQGQKJ9YS0tY+29Nm7d68jp3Wlu3Tp4rwh/a21pvv06eO29ZkyZYrNnDnT7rzzTidK+hxBqswNx1Uh0JZAYkVIFbl+t9TLly+7umkroOtTdtPD559/3u3EITFauHChzZ8/33lM2o2DBAEIVI5AokUoCjaJk16NjY12+PBht0/Z5s2bTdsDLV682Orq6tzfas6RIACB8hNIvQi1RXr+/HnTS0Ft7Um/fv16W7Jkia1cuTKzNfTETBOOjRHbMuN/CJSSQHAilIUp7+jkyZNu11Y12bZs2WLLly+3FStWuB1b2bssS4p3CJSWQLAilMWqALfEaPv27bZ//37buXOnrV692u6++27X25Y9jncIQKA0BIIXoSxWeUbHjh2zjRs32jvvvGOrVq2yb37zkUwTbQJjjbKQeIdACQgwYroNVMWL9u3bZ7/73e/sV7/6X9u1a5e1tLS0OYp/IQCBuAjgCXVAUl7RM888YydOnLDHHnvMFixYYL169ergaD6GAAQKJYAI5SB39uxZe+WVV0yjs8+cOWNLly61/v375ziDryAAgXwJ0BzrhJiaZ//617/s17/+tT377LOuN62TU/gaAhDIgwAiFAHWpUuX7P3337ff/OY3blxRU1NThLM4BAIQiEIAEYpCKXOMes80T+3xxx83jbjW/yQIQKB4AohQHgzlEe3evdueeOKJzPse03IiJAhAoDgCiFCe/C5cuGDbtm3LCNHjVl9fn+fZHA4BCLQlgAi1JRLh/3PnztmGDRvsT3/6kx09ejTCGRwCAQh0RAAR6ohMJ583NDTYX/7yF9u0aZOpmUaCAAQKI4AIFcbNnaWlQdauXetGWLe2thaRE6dCIFwCiFARtpcH9Oabb9q6desyAxpPFpETp0IgXAKIUJG216hqDWLcu3cfvWVFsuT0MAkgQkXaPbvW9dNPP+0WSisyO06HQHAEEKEYTK51rV988UX74IMP8IZi4EkWYRFAhGKwt7yhQ4cOuW579ZqRIACB6AQQoeisch6paRzqrtdSsSQIQCA6AUQoOqucR0qEDh48aFu3bjUNZiRBAALRCCBC0ThFOkrLfrz++utumdhIJ3AQBCBgiFCMN4HGDWmh/H//+9/G4MUYwZJVqgkgQjGbVysw7tixg8XPYuZKduklgAjFbFv1lL399tt26tSpmHMmOwikkwAiFLNdtcaQxgtpXWoSBCDQOQFEqHNGeR2hXjIt7/Hpp58ycDEvchwcKgFEqASWVy/ZgQMHrLGxsQS5kyUE0kUAESqBPa9evWoff/yxNTc3lyB3soRAugggQiWwp0ToyJEjpqVgSRCAQG4CiFBuPgV9qzFC2rlVE1tJEIBAbgKIUG4+BX2rHjKNF2LZ14LwcVJgBBChEhhcY4U0mx5PqARwyTJ1BBChEpm0paWFqRslYku26SLQNV3VSW9tFOzWmkUKdldVVaW3oiWomWJ0PXr0sFGjRlm3bt1KcAWyLIYAIlQMvTKee/z4cfvRj37kRmN36YIDmw96xegmTJhgv//9723cuHH5nMqxZSCACJUBchyX0EhsjT3SIEhSYQTEkOQfAR6pJbJJ165dY202yfu56aabSlTa9GcrdniQftoZESqBXSRAgwcPjlU0lGdNTY117969BCVOd5ZiJnZiSPKPACJUApvoiTto0CAXDI0re/2AlCc/pPyJyh56KCDg+bMrxxmIUAkoq/fq/72WHrHlrl6dIUOGIEIFEM16kQh4AfDKcAoiVALI1dXVNnLkSOvdu2dsuesHpDyJC+WPVAI+evRouufzR1eWMxChEmCWCKkruHfv3rHlrh/SzTffbD17xidssRXO84zEbPz48bE2jz2vcqKKhwiVwFy9evWySZMmWd++fWPLXfEM5dmvX7/Y8gwloz59+jh2eJF+WhwRitkuajYNHz7cxowZE2uXsOJMI0aMcM0KAqzRjSZWaopptDQjzaNzK+eRiFDMtCVCU6dOtYEDB8acs5k8rNraWppkeZCV9yN7xNk0zuPyHBqBACIUAVI+h0iEZs6c6brT8zkvyrGKbcyePZsmWRRY/zlGwn377bebmmQkPwkgQjHbZcCAAU4o+vfvH3PO5nrGJEJDhw6lqz4CXT0QNKxh1qxZBKUj8KrUIYhQjOTl+uuGV89YqeIPw4YNszvvvJMmWQS7KR4kVoqlkfwlgAjFaBu5/gsXLnSeSozZ/ldW2WtoMCQpNwGNkl60aBHN19yYKv4tIhSTCfTU1TieefPmWSmaYtliytuaM2eOTZs2jYGLWSjtvMseCkjPmTOXplg7fHz6CBGKyRq66e+55x4nRDFl2WE2inMsWbKkJMHvDi+asC/0ILj33nszwyWGJqzk4RUXEYrB5gqAaizK0qVL3ZyxGLLMmYWaZPfdd5/dcsstTMpsh5QeCBrYKXvQK9YOIM8+QoRiMIiWDpUoaAxPudaskegtX77czQ6PoQqpykJekNhoqkapOghSBazClUGEijSAvKCJEyfagw8+aOq5KlfSE/6BB1bYF77wBbyh66DLC7rttttsxYoVsU6bue4S/BkzAUSoSKCaH/bAAw9kvKApZfOCskUeM2aUff3rX3dTEiSGJHMPAgmQps3gBSXjjkCEirCTnrrqDfva176WmaYxuIicCjtVzUA1OxSk1t+hJ8XKFi9ebHV1dcSCEnQzIEJFGEuTIletWuW6giv11NVk2dWrV7syhOwNqe6TJ092LOQFkZJDABEq0FYaLPjQQw+5bvlKLhGhQLimcjz66KOuCVJgdRJ/mhZ8+9a3vmVf+tKXyt4sTjy8ClcAESrAAIoDLVu2zB5++GG3bEcBWcR6isqj2NA3vvGNsgbHY61EEZnpgZCtv+bukZJFABHK016ayT537lz78Y9/bFOmTPEm+Klm2fe//303VKCUI7bzxFXywyXAX/7yl+0HP/iBG6tV8gtygdgJIEJ5IFWzS13iP/nJT2zGjBneuf0aF/PDH/7QFixY4NYeyqNqiTxUD4S77rrL7UyrwYmkZBJAhCLaTT1hmoskD0iTVPW/b0nBca1lJJHUj1M/0rQm9QZqnaCf//zn7r1cg0TTyrOS9WJwSQT68oAkQLrh77//fq+7fyWO8oSuXLlira2t9s9//tPOnz8foZbJOURd8QrG/+IXv3Cz5CvZMZAcav6WFBHqxDa64dX0knehYHQS4i36UWq8jLqtf/vb39obb7xhZ8+e7aSmyfhaMSB5eXogyCNNs7eXDIsUX0pEKAdDCc7dd9/tYg7z58/32gNqWw01V/QjVW/RE088YS+++KIdO3as7WGJ+l+9YF/5ylfssccec00wPKBEma/DwiJCHaDRPDB5PooBaS6S9v1KWlLTTM2WX/7yl24owV//+lf79NNPXVMtSXWRR6dxQJqfpx5ABaGJASXJgrnLigi14aPml2aor1y50h555BE3OTXJN7zKrsXW1HzRSOI1a9bYvn37rKmpqU3N/fxX9tBIaA1E1Oh0iREpXQQQof/YU16DtulRs0vTINQM0+JhaUkaR6QfspYbWbt2rb388st25MgRu3z5spdVlD2GDRueGZG+2NlDI6GTEI/zEqbnhQpehOTqK9ipH6cmPmoGtjwH/QjSllRPxYm0GJoWgH/mmWds9+7ddvr0aW/ESPbQw0BNYI2C1gRdeabaWpuUTgLBipBERj9KDfDTLHQ1vxRr0GdpTvox60f9yCMPux60devW2fr1662+vt7OnDljly5dqkj1FWRWEH3ChAkuFicB0q4lao6R0k2gKjOWpDWJVTxx4oTzWrZs2ZJX8XVT60mrhcgWLVrkxv1IfEKdc9TY2GiHDh2yF154wf7xj3+4eJHYlitmpMXZBg0a5KbAaI1udQZIfGh65XVbJ/rg1HtC8nj0lNXNLvHRiGI1SRT7UZAz9Js92xRV0FpNUQ1u3Lx5s7311luWFaOLFy/G5iHJHho+IHso5qbeOz0MNB9Pmzqm3RNNtFqUqPCJFqGrV69+jkU3t3qC1JWevdG1/7g2vtNEU4mP4iBqiuhGZ5Db5+jcHxIFvcRLzVMJ0I4dO2znzp22d+9e5y2dO3fOsoKkEdni31FgWzZQ008xHj0EssIj/hp9rk0iZY+s8Oh7UpgEEtscUzD1pz/9qfuh6IaXlyO3XgPa5OHIpVfXrm56iZFexBfyu8kVH2pubnavo0eP2oEDB+zgwYP22WefOZE6deqUNTQ03DDuSMKjjQez9tDib4q9qdkr20jsZAuEJz97pPXoxIrQtWvX3AhgPZk1cVNPXXlBepco6emrV6VWPEzjDSNR0kvej7yglpYW9942rNiRPWQX7JHGO6O4OiVWhIqrNmdDAAK+EGApD18sQTkgECgBRChQw1NtCPhCABHyxRKUAwKBEkCEAjU81YaALwQQIV8sQTkgECgBRChQw1NtCPhCABHyxRKUAwKBEkCEAjU81YaALwQQIV8sQTkgECgBRChQw1NtCPhCABHyxRKUAwKBEkCEAjU81YaALwQQIV8sQTkgECgBRChQw1NtCPhCABHyxRKUAwKBEkCEAjU81YaALwQQIV8sQTkgECgBRChQw1NtCPhCABHyxRKUAwKBEkCEAjU81YaALwQQIV8sQTkgECgBRChQw1NtCPhCABHyxRKUAwKBEkCEAjU81YaALwQQIV8sQTkgECgBRChQw1NtCPhCABHyxRKUAwKBEkCEAjU81YaALwQQIV8sQTkgECgBRChQw1NtCPhCABHyxRKUAwKBEkCEAjU81YaALwQQIV8sQTkgECgBRChQw1NtCPhCABHyxRKUAwKBEkCEAjU81YaALwQQIV8sQTkgECgBRChQw1NtCPhCABHyxRKUAwKBEkCEAjU81YaALwQQIV8sQTkgECgBRChQw1NtCPhCABHyxRKUAwKBEkCEAjU81YaALwQQIV8sQTkgECgBRChQw1NtCPhCABHyxRKUAwKBEkCEAjU81YaALwQQIV8sQTkgECgBRChQw1NtCPhCABHyxRKUAwKBEkCEAjU81YaALwQQIV8sQTkgECgBRChQw1NtCPhCABHyxRKUAwKBEkCEAjU81YaALwQQIV8sQTkgECgBRChQw1NtCPhCABHyxRKUAwKBEkCEAjU81YaALwQQIV8sQTkgECgBRChQw1NtCPhCABHyxRKUAwKBEkCEAjU81YaALwQQIV8sQTkgECgBRChQw1NtCPhCABHyxRKUAwKBEkCEAjU81YaALwQQIV8sQTkgECgBRChQw1NtCPhCABHyxRKUAwKBEkCEAjU81YaALwQQIV8sQTkgECgBRChQw1NtCPhCABHyxRKUAwKBEkCEAjU81YaALwQQIV8sQTkgECgBRChQw1NtCPhCABHyxRKUAwKBEkCEAjU81YaALwQQIV8sQTkgECgBRChQw1NtCPhC4P8AppvEWekjhmUAAAAASUVORK5CYII=" alt="02arc"></p> <p>2、<strong>arcTo(x1, y1, x2, y2, radius)</strong>: 根据给定的控制点和半径画一段圆弧，最后再以直线连接两个控制点。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> context <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">arcTo</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>arcTo</code> 方法的说明：</p> <p>这个方法可以这样理解。绘制的弧形是由两条切线所决定。</p> <p>第 1 条切线：起始点和控制点1决定的直线。</p> <p>第 2 条切线：控制点1 和控制点2决定的直线。</p> <p><strong>其实绘制的圆弧就是与这两条直线相切的圆弧。</strong></p> <h5 id="_4-5-绘制贝塞尔曲线"><a href="#_4-5-绘制贝塞尔曲线" class="header-anchor">#</a> 4.5 绘制贝塞尔曲线</h5> <p>贝塞尔曲线(Bézier curve)，又称贝兹曲线或贝济埃曲线，是应用于二维图形应用程序的数学曲线。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">quadraticCurveTo</span><span class="token punctuation">(</span>cp1x<span class="token punctuation">,</span> cp1y<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token comment">// 二次</span>
<span class="token function">bezierCurveTo</span><span class="token punctuation">(</span>cp1x<span class="token punctuation">,</span> cp1y<span class="token punctuation">,</span> cp2x<span class="token punctuation">,</span> cp2y<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token comment">// 三次</span>
</code></pre></div><h2 id="_5、设置样式和颜色"><a href="#_5、设置样式和颜色" class="header-anchor">#</a> 5、设置样式和颜色</h2> <p>在前面的绘制矩形章节中，只用到了默认的线条和颜色。</p> <p>如果想要给图形上色，有两个重要的属性可以做到。</p> <ol><li><p><code>fillStyle = color</code> 设置图形的填充颜色</p></li> <li><p><code>strokeStyle = color</code> 设置图形轮廓的颜色</p></li> <li><p><code>lineWidth</code></p></li> <li><p><code>lineCap</code>  butt、round、square</p></li> <li><p><code>lineJoin</code>同一个 path 内，设定线条与线条间接合处的样式。共有 3 个值 <code>round</code>, <code>bevel</code> 和 <code>miter</code></p></li> <li><p>用 <code>setLineDash</code> 方法和 <code>lineDashOffset</code> 属性来制定虚线样式。 <code>setLineDash</code> 方法接受一个数组，来指定线段与间隙的交替；<code>lineDashOffset</code>属性设置起始偏移量。</p> <blockquote><p><code>getLineDash()</code> 返回一个包含当前虚线样式，长度为非负偶数的数组。</p></blockquote></li></ol> <h2 id="_6、绘制文本"><a href="#_6、绘制文本" class="header-anchor">#</a> 6、绘制文本</h2> <ol><li><p>canvas 提供了两种方法来渲染文本:</p></li> <li><ol><li><code>fillText(text, x, y [, maxWidth])</code> 在指定的 (x,y) 位置填充指定的文本，绘制的最大宽度是可选的。</li> <li><code>strokeText(text, x, y [, maxWidth])</code> 在指定的 (x,y) 位置绘制文本边框，绘制的最大宽度是可选的</li></ol></li></ol> <div class="language-js extra-class"><pre class="language-js"><code>      context<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token string">'italic normal bold 20px PingFangSC-Regular sans-serif'</span><span class="token punctuation">;</span>
	    <span class="token comment">//   context.textAlign = 'left';</span>
      context<span class="token punctuation">.</span>direction <span class="token operator">=</span> <span class="token string">'ltr'</span><span class="token punctuation">;</span>
      context<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span><span class="token string">'Hello, world'</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      context<span class="token punctuation">.</span><span class="token function">strokeText</span><span class="token punctuation">(</span><span class="token string">'Hello, world'</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_7、绘制图片"><a href="#_7、绘制图片" class="header-anchor">#</a> 7、绘制图片</h2> <p><code>ctx.drawImage(img,0,0);</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'./imgs/Canvas_default_grid.png'</span><span class="token punctuation">;</span>
</code></pre></div><p>也可以绘制从HTML获取的img图片</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#img'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 点击事件是为了确保图片已经加载</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="_7-1-缩放图片"><a href="#_7-1-缩放图片" class="header-anchor">#</a> 7.1 缩放图片</h5> <p><code>drawImage()</code> 也可以再添加两个参数：<code>drawImage(image, x, y, width, height)</code>,方法多了 2 个参数：<code>width</code> 和 <code>height</code>，这两个参数用来控制 当向 canvas 画入时应该缩放的大小</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#img'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>img<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="_7-2-切片-绘制部分图片"><a href="#_7-2-切片-绘制部分图片" class="header-anchor">#</a> 7.2 切片（绘制部分图片）</h5> <p><code>drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight)</code></p> <p>第一个参数和其它的是相同的，都是一个图像或者另一个 canvas 的引用。
其他 8 个参数：
前 4 个是定义图像源的切片位置和大小，后 4 个则是定义切片的目标显示位置和大小。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#img'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>img<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_8、状态的保存和恢复"><a href="#_8、状态的保存和恢复" class="header-anchor">#</a> 8、状态的保存和恢复</h2> <p><code>Saving and restoring state</code> 是绘制复杂图形时必不可少的操作。
<code>save()</code> 和 <code>restore()</code> <code>save</code> 和 <code>restore</code> 方法是用来保存和恢复 <code>canvas</code> 状态的，都没有参数。
<code>Canvas</code> 的状态就是当前画面应用的所有样式和变形的一个快照。
1、关于 save() ：Canvas状态存储在栈中，每当save()方法被调用后，当前的状态就被推送到栈中保存。
一个绘画状态包括：</p> <ul><li>当前应用的变形（即移动，旋转和缩放）</li> <li><code>strokeStyle</code>, <code>fillStyle</code>, <code>globalAlpha</code>, <code>lineWidth</code>, <code>lineCap</code>, <code>lineJoin</code>, <code>miterLimit</code>, <code>shadowOffsetX</code>, <code>shadowOffsetY</code>, <code>shadowBlur</code>, <code>shadowColor</code>, <code>globalCompositeOperation 的值</code></li> <li>当前的裁切路径（<code>clipping path</code>）
可以调用任意多次 <code>save</code>方法(类似数组的 <code>push()</code>)。</li></ul> <h2 id="_9、变形"><a href="#_9、变形" class="header-anchor">#</a> 9、变形</h2> <h5 id="_9-1-translate"><a href="#_9-1-translate" class="header-anchor">#</a> 9.1 translate</h5> <p><code>translate(x, y)</code>用来平移canvas的原点到指定的位置。在做变形之前保存状态是一个良好的习惯</p> <div class="language-js extra-class"><pre class="language-js"><code>context<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="_9-2-rotate"><a href="#_9-2-rotate" class="header-anchor">#</a> 9.2 rotate</h5> <p><code>rotate(angle)</code> 旋转坐标轴， angle是旋转的角度， 弧度单位， 顺时针方向。</p> <div class="language-js extra-class"><pre class="language-js"><code>context<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">strokeRect</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="_9-3-scale"><a href="#_9-3-scale" class="header-anchor">#</a> 9.3 scale</h5> <p><code>scale(x, y)</code>我们用它来增减图形在 <code>canvas</code> 中的像素数目，对形状，位图进行缩小或者放大。</p> <div class="language-js extra-class"><pre class="language-js"><code>context<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">strokeRect</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="_9-4-transform-变形矩阵"><a href="#_9-4-transform-变形矩阵" class="header-anchor">#</a> 9.4 transform(变形矩阵)</h5> <p><code>transform(a, b, c, d, e, f)</code></p> <ul><li>a (m11): Horizontal scaling.</li> <li>b (m12): Horizontal skewing.</li> <li>c (m21): Vertical skewing.</li> <li>d (m22): Vertical scaling.</li> <li>e (dx): Horizontal moving.</li> <li>f (dy): Vertical moving.</li></ul> <h2 id="_10、合成"><a href="#_10、合成" class="header-anchor">#</a> 10、合成</h2> <p>在前面的所有例子中、，我们总是将一个图形画在另一个之上，对于其他更多的情况，仅仅这样是远远不够的。比如，对合成的图形来说，绘制顺序会有限制。不过，我们可以利用 globalCompositeOperation 属性来改变这种状况。</p> <p><code>context.globalCompositeOperation = type</code>
type是下面几种之一</p> <ol><li><code>source-over</code> 这是默认设置，新图像会覆盖在原有图像。</li> <li><code>source-in</code>仅仅会出现新图像与原来图像重叠的部分，其他区域都变成透明的。(包括其他的老图像区域也会透明)保证重叠部分最量的像素。(每个颜色位进行比较，得到最大的)</li> <li><code>source-out</code> 仅仅显示新图像与老图像没有重叠的部分，其余部分全部透明。(老图像也不显示)</li> <li><code>source-atop</code>新图像仅仅显示与老图像重叠区域。老图像仍然可以显示。</li> <li><code>destination-over</code> 新图像会在老图像的下面。</li> <li><code>destination-in</code> 仅仅新老图像重叠部分的老图像被显示，其他区域全部透明。</li> <li><code>destination-out</code>仅仅老图像与新图像没有重叠的部分。 注意显示的是老图像的部分区域。</li> <li><code>destination-atop</code> 老图像仅仅仅仅显示重叠部分，新图像会显示在老图像的下面。</li> <li><code>lighter</code>新老图像都显示，但是重叠区域的颜色做加处理。</li> <li><code>darken</code> 保留重叠部分最黑的像素。(每个颜色位进行比较，得到最小的)</li> <li><code>lighten</code>保证重叠部分最量的像素。(每个颜色位进行比较，得到最大的)</li> <li><code>xor</code> 重叠部分会变成透明。</li> <li><code>copy</code> 只有新图像会被保留，其余的全部被清除(边透明)。</li></ol> <h2 id="_11、剪裁路径"><a href="#_11、剪裁路径" class="header-anchor">#</a> 11、剪裁路径</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 这个圆以外的内容不会被显示</span>
ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">clip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'pink'</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	
</code></pre></div><h2 id="_12、动画"><a href="#_12、动画" class="header-anchor">#</a> 12、动画</h2> <h5 id="_12-1-动画的基本步骤"><a href="#_12-1-动画的基本步骤" class="header-anchor">#</a> 12.1 动画的基本步骤</h5> <p>1、清空 canvas 再绘制每一帧动画之前，需要清空所有。清空所有最简单的做法就是 clearRect() 方法。
2、保存 canvas 状态 如果在绘制的过程中会更改 canvas 的状态(颜色、移动了坐标原点等),又在绘制每一帧时都是原始状态的话，则最好保存下 canvas 的状态
3、绘制动画图形这一步才是真正的绘制动画帧
4、恢复 canvas 状态如果你前面保存了 canvas 状态，则应该在绘制完成一帧之后恢复 canvas 状态。</p> <h5 id="_12-2-控制动画"><a href="#_12-2-控制动画" class="header-anchor">#</a> 12.2 控制动画</h5> <p>我们可用通过 <code>canvas</code> 的方法或者自定义的方法把图像绘制到 <code>canvas</code> 上。正常情况，我们能看到绘制的结果是在脚本执行结束之后。例如，我们不可能在一个 <code>for</code> 循环内部完成动画。
也就是，为了执行动画，我们需要一些可以定时执行重绘的方法。
一般用到下面三个方法：</p> <ol><li><code>setInterval()</code></li> <li><code>setTimeout()</code></li> <li><code>requestAnimationFrame()</code></li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">3/31/2022, 5:38:15 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/./viewsize/" class="prev">
        各种视口宽高
      </a></span> <span class="next"><a href="/./svg/">
        SVG
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="./assets/js/app.e7c186d1.js" defer></script><script src="./assets/js/2.0202d757.js" defer></script><script src="./assets/js/24.aae6fd93.js" defer></script>
  </body>
</html>
